{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass ApiService {\n  constructor() {\n    this.baseURL = API_BASE_URL;\n  }\n\n  // Get auth token from localStorage\n  getToken() {\n    return localStorage.getItem('authToken');\n  }\n\n  // Set auth token in localStorage\n  setToken(token) {\n    localStorage.setItem('authToken', token);\n  }\n\n  // Remove auth token from localStorage\n  removeToken() {\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('userRole');\n  }\n\n  // Get headers with auth token\n  getHeaders() {\n    const token = this.getToken();\n    return {\n      'Content-Type': 'application/json',\n      ...(token && {\n        'Authorization': `Bearer ${token}`\n      })\n    };\n  }\n\n  // Generic request method\n  async request(endpoint, options = {}) {\n    const url = `${this.baseURL}${endpoint}`;\n    const config = {\n      headers: this.getHeaders(),\n      ...options\n    };\n    try {\n      const response = await fetch(url, config);\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || 'Request failed');\n      }\n      return data;\n    } catch (error) {\n      console.error('API request error:', error);\n      throw error;\n    }\n  }\n\n  // Auth endpoints\n  async register(userData) {\n    return this.request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n  }\n  async login(credentials) {\n    const response = await this.request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify(credentials)\n    });\n    if (response.success && response.data.token) {\n      this.setToken(response.data.token);\n      localStorage.setItem('userRole', response.data.user.role);\n    }\n    return response;\n  }\n  async logout() {\n    try {\n      await this.request('/auth/logout', {\n        method: 'POST'\n      });\n    } finally {\n      this.removeToken();\n    }\n  }\n  async getCurrentUser() {\n    return this.request('/auth/me');\n  }\n\n  // Activity endpoints\n  async createActivity(activityData) {\n    return this.request('/activities', {\n      method: 'POST',\n      body: JSON.stringify(activityData)\n    });\n  }\n  async getMonthActivities(month) {\n    return this.request(`/activities/month/${month}`);\n  }\n  async getDateActivity(date) {\n    return this.request(`/activities/date/${date}`);\n  }\n  async deleteActivity(activityId) {\n    return this.request(`/activities/${activityId}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // User endpoints (admin only)\n  async getAllUsers() {\n    return this.request('/users');\n  }\n  async getUserById(userId) {\n    return this.request(`/users/${userId}`);\n  }\n  async getUserActivities(userId, month = null) {\n    const endpoint = month ? `/users/${userId}/activities?month=${month}` : `/users/${userId}/activities`;\n    return this.request(endpoint);\n  }\n  async updateUserStatus(userId, isActive) {\n    return this.request(`/users/${userId}/status`, {\n      method: 'PUT',\n      body: JSON.stringify({\n        isActive\n      })\n    });\n  }\n  async getUserStats() {\n    return this.request('/users/stats/overview');\n  }\n\n  // Health check\n  async healthCheck() {\n    return this.request('/health');\n  }\n}\n\n// Create and export a singleton instance\nconst apiService = new ApiService();\nexport default apiService;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","ApiService","constructor","baseURL","getToken","localStorage","getItem","setToken","token","setItem","removeToken","removeItem","getHeaders","request","endpoint","options","url","config","headers","response","fetch","data","json","ok","Error","message","error","console","register","userData","method","body","JSON","stringify","login","credentials","success","user","role","logout","getCurrentUser","createActivity","activityData","getMonthActivities","month","getDateActivity","date","deleteActivity","activityId","getAllUsers","getUserById","userId","getUserActivities","updateUserStatus","isActive","getUserStats","healthCheck","apiService"],"sources":["C:/Users/rahma/OneDrive/Desktop/suivi du mois/src/services/api.js"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nclass ApiService {\r\n  constructor() {\r\n    this.baseURL = API_BASE_URL;\r\n  }\r\n\r\n  // Get auth token from localStorage\r\n  getToken() {\r\n    return localStorage.getItem('authToken');\r\n  }\r\n\r\n  // Set auth token in localStorage\r\n  setToken(token) {\r\n    localStorage.setItem('authToken', token);\r\n  }\r\n\r\n  // Remove auth token from localStorage\r\n  removeToken() {\r\n    localStorage.removeItem('authToken');\r\n    localStorage.removeItem('userRole');\r\n  }\r\n\r\n  // Get headers with auth token\r\n  getHeaders() {\r\n    const token = this.getToken();\r\n    return {\r\n      'Content-Type': 'application/json',\r\n      ...(token && { 'Authorization': `Bearer ${token}` })\r\n    };\r\n  }\r\n\r\n  // Generic request method\r\n  async request(endpoint, options = {}) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    const config = {\r\n      headers: this.getHeaders(),\r\n      ...options\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(url, config);\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || 'Request failed');\r\n      }\r\n\r\n      return data;\r\n    } catch (error) {\r\n      console.error('API request error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Auth endpoints\r\n  async register(userData) {\r\n    return this.request('/auth/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData)\r\n    });\r\n  }\r\n\r\n  async login(credentials) {\r\n    const response = await this.request('/auth/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify(credentials)\r\n    });\r\n\r\n    if (response.success && response.data.token) {\r\n      this.setToken(response.data.token);\r\n      localStorage.setItem('userRole', response.data.user.role);\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  async logout() {\r\n    try {\r\n      await this.request('/auth/logout', {\r\n        method: 'POST'\r\n      });\r\n    } finally {\r\n      this.removeToken();\r\n    }\r\n  }\r\n\r\n  async getCurrentUser() {\r\n    return this.request('/auth/me');\r\n  }\r\n\r\n  // Activity endpoints\r\n  async createActivity(activityData) {\r\n    return this.request('/activities', {\r\n      method: 'POST',\r\n      body: JSON.stringify(activityData)\r\n    });\r\n  }\r\n\r\n  async getMonthActivities(month) {\r\n    return this.request(`/activities/month/${month}`);\r\n  }\r\n\r\n  async getDateActivity(date) {\r\n    return this.request(`/activities/date/${date}`);\r\n  }\r\n\r\n  async deleteActivity(activityId) {\r\n    return this.request(`/activities/${activityId}`, {\r\n      method: 'DELETE'\r\n    });\r\n  }\r\n\r\n  // User endpoints (admin only)\r\n  async getAllUsers() {\r\n    return this.request('/users');\r\n  }\r\n\r\n  async getUserById(userId) {\r\n    return this.request(`/users/${userId}`);\r\n  }\r\n\r\n  async getUserActivities(userId, month = null) {\r\n    const endpoint = month \r\n      ? `/users/${userId}/activities?month=${month}`\r\n      : `/users/${userId}/activities`;\r\n    return this.request(endpoint);\r\n  }\r\n\r\n  async updateUserStatus(userId, isActive) {\r\n    return this.request(`/users/${userId}/status`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify({ isActive })\r\n    });\r\n  }\r\n\r\n  async getUserStats() {\r\n    return this.request('/users/stats/overview');\r\n  }\r\n\r\n  // Health check\r\n  async healthCheck() {\r\n    return this.request('/health');\r\n  }\r\n}\r\n\r\n// Create and export a singleton instance\r\nconst apiService = new ApiService();\r\nexport default apiService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}